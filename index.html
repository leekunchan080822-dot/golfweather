<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Golf Rain Radar</title>

<style>
body {
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    background:#eef2f7;
    margin:0;
    padding:15px;
}
h2 { text-align:center; }

.region-btn {
    display:block;
    width:100%;
    padding:14px;
    margin:10px 0;
    border:none;
    border-radius:12px;
    font-size:16px;
    font-weight:bold;
    background:#1f6feb;
    color:white;
}

.card {
    background:white;
    border-radius:14px;
    padding:14px;
    margin-top:12px;
    box-shadow:0 4px 12px rgba(0,0,0,0.08);
}

.hourly {
    display:flex;
    overflow-x:auto;
    margin-top:10px;
}

.hour {
    min-width:70px;
    text-align:center;
    margin-right:8px;
    font-size:13px;
}

.rain-low { color:green; }
.rain-mid { color:orange; }
.rain-high { color:red; font-weight:bold; }

.back-btn{
    margin-top:15px;
    background:#444;
}
</style>
</head>

<body>

<h2>ğŸŒï¸ Golf Rain Radar</h2>
<div id="main"></div>

<script>

const API_KEY = "fc4f1698bc8d47ba90757e3c03e713bc";

/* å›ºå®šç¶“ç·¯åº¦ç‰ˆæœ¬ */
const regions = {

"å°åŒ—å¸‚ã€æ–°åŒ—å¸‚":[
{name:"ç¿¡ç¿ ", lat:25.016, lon:121.649},
{name:"é»ƒé‡‘æµ·å²¸(åŒ—æµ·)", lat:25.291, lon:121.556},
{name:"æ¿±æµ·", lat:25.272, lon:121.539},
{name:"å¤§å±¯", lat:25.191, lon:121.507},
{name:"å°ç£(è€æ·¡æ°´)", lat:25.172, lon:121.431},
{name:"æ®çš‡(æ–°æ·¡æ°´)", lat:25.190, lon:121.457},
{name:"åœ‹è¯", lat:25.140, lon:121.465},
{name:"å…«é‡Œåœ‹éš›", lat:25.146, lon:121.399},
{name:"ç¾éº—è¯", lat:25.116, lon:121.409},
{name:"å¹¸ç¦", lat:25.118, lon:121.421},
{name:"æ±è¯", lat:25.011, lon:121.535},
{name:"æ—å£", lat:25.080, lon:121.392}
],

"æ¡ƒåœ’åœ°å€":[
{name:"å°åŒ—(æ¡ƒåœ’)", lat:25.059, lon:121.223},
{name:"çµ±å¸¥", lat:25.063, lon:121.274},
{name:"ç¬¬ä¸€", lat:25.066, lon:121.218},
{name:"æ°¸æ¼¢", lat:25.062, lon:121.206},
{name:"é•·åºš", lat:25.050, lon:121.352},
{name:"æ±æ–¹", lat:25.040, lon:121.270},
{name:"å¤§æºª", lat:24.879, lon:121.296},
{name:"æ¡ƒåœ’", lat:24.989, lon:121.310},
{name:"é¾æ½­", lat:24.863, lon:121.213},
{name:"æšæ˜‡", lat:24.833, lon:121.177},
{name:"æ¥Šæ¢…", lat:24.912, lon:121.145}
]

};

async function getWeather(lat, lon){
    const url =
    `https://api.openweathermap.org/data/2.5/onecall?lat=${lat}&lon=${lon}&exclude=minutely,daily,alerts&units=metric&appid=${API_KEY}`;
    const res = await fetch(url);
    return await res.json();
}

function rainClass(pop){
    if(pop < 0.3) return "rain-low";
    if(pop < 0.6) return "rain-mid";
    return "rain-high";
}

function showRegions(){
    let html = "";
    for(const region in regions){
        html += `<button class="region-btn" onclick="loadRegion('${region}')">${region}</button>`;
    }
    document.getElementById("main").innerHTML = html;
}

async function loadRegion(region){

    document.getElementById("main").innerHTML = "è¼‰å…¥ä¸­...";

    let html = `<button class="region-btn back-btn" onclick="showRegions()">â† è¿”å›å€åŸŸ</button>`;

    for(const course of regions[region]){

        const data = await getWeather(course.lat, course.lon);
        const current = data.current;
        const hourly = data.hourly.slice(0,12);

        html += `
        <div class="card">
            <strong>${course.name}</strong><br>
            ğŸŒ¡ ${current.temp}Â°Cã€€
            ğŸŒ¬ ${(current.wind_speed*3.6).toFixed(1)} km/h
            <div class="hourly">
        `;

        hourly.forEach(h=>{
            const hour = new Date(h.dt*1000).getHours();
            const pop = Math.round(h.pop*100);
            html += `
                <div class="hour ${rainClass(h.pop)}">
                    ${hour}:00<br>
                    â˜” ${pop}%
                </div>
            `;
        });

        html += `</div></div>`;
    }

    document.getElementById("main").innerHTML = html;
}

showRegions();

</script>

</body>
</html>
